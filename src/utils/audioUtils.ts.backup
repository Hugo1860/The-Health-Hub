
// 音频文件路径修复脚本
export function fixAudioUrl(url) {
  if (!url) return '';
  
  // 如果是完整的 HTTP URL，直接返回
  if (url.startsWith('http://') || url.startsWith('https://')) {
    return url;
  }
  
  // 如果是相对路径，添加正确的前缀
  if (url.startsWith('/uploads/')) {
    return url;
  }
  
  // 如果是文件名，添加 uploads 路径
  if (!url.startsWith('/')) {
    return '/uploads/' + url;
  }
  
  return url;
}

// 检查音频文件是否存在
export async function checkAudioExists(url) {
  try {
    const response = await fetch(url, { method: 'HEAD' });
    return response.ok;
  } catch (error) {
    console.error('检查音频文件失败:', error);
    return false;
  }
}
